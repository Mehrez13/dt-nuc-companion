<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DT NUC Companion - Version D√©mo</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2563eb">
    <meta name="description" content="Application companion pour techniciens CND - DT NUC">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1 class="logo">üîß DT NUC Companion</h1>
                <div class="connection-status" id="connectionStatus">
                    <span class="status-dot offline"></span>
                    <span>Hors ligne</span>
                </div>
            </div>
        </header>

        <!-- Navigation principale -->
        <nav class="main-nav">
            <button class="nav-btn active" data-section="dashboard">
                üìä Tableau de bord
            </button>
            <button class="nav-btn" data-section="procedures">
                üìã Proc√©dures DT NUC
            </button>
            <button class="nav-btn" data-section="checklist">
                ‚úÖ Check-list
            </button>
            <button class="nav-btn" data-section="photos">
                üì∏ Photos & Mesures
            </button>
        </nav>

        <!-- Contenu principal -->
        <main class="main-content">
            <!-- Section Tableau de bord -->
            <section id="dashboard" class="content-section active">
                <div class="dashboard-grid">
                    <div class="card">
                        <h3>üéØ Mission en cours</h3>
                        <p><strong>Installation:</strong> R√©acteur 1 - CPY</p>
                        <p><strong>M√©thode:</strong> Ultrasons (UT)</p>
                        <p><strong>√âquipement:</strong> G√©n√©rateur vapeur</p>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 65%"></div>
                        </div>
                        <p class="progress-text">65% termin√©</p>
                    </div>

                    <div class="card">
                        <h3>üìö Proc√©dures disponibles</h3>
                        <div class="procedure-list">
                            <div class="procedure-item">DT NUC 001 - UT G√©n√©rateur</div>
                            <div class="procedure-item">DT NUC 045 - RT Tuyauterie</div>
                            <div class="procedure-item">DT NUC 089 - MT Surface</div>
                        </div>
                    </div>

                    <div class="card">
                        <h3>‚ö†Ô∏è Alertes & Notifications</h3>
                        <div class="alert warning">
                            <strong>Nouvelle version DT NUC 001</strong><br>
                            Disponible pour synchronisation
                        </div>
                        <div class="alert info">
                            <strong>EPI requis</strong><br>
                            Gants, casque, chaussures de s√©curit√©
                        </div>
                    </div>

                    <div class="card">
                        <h3>üìä Statistiques</h3>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <span class="stat-number">24</span>
                                <span class="stat-label">Contr√¥les ce mois</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number">98%</span>
                                <span class="stat-label">Conformit√©</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

              <!-- Section Proc√©dures Avanc√©e -->
              <section id="procedures" class="content-section">
                  <div class="procedures-header">
                      <h3>üìã Gestionnaire de Proc√©dures DT NUC</h3>
                      <div class="procedures-actions">
                          <button class="btn-primary" id="uploadProcedureBtn">‚ûï Upload Proc√©dure</button>
                          <button class="btn-secondary" id="viewStatsBtn">üìä Statistiques</button>
                      </div>
                  </div>
            
                  <div class="search-container-advanced">
                      <div class="search-row">
                          <input type="text" id="advancedSearch" placeholder="üîç Recherche avanc√©e (code, titre, contenu...)" class="search-input-advanced">
                          <button class="btn-secondary" id="searchBtn">Rechercher</button>
                      </div>
            
                      <div class="filters-row">
                          <select class="filter-select" id="installationFilter">
                              <option value="">Toutes les installations</option>
                              <option value="REP 900 MW">REP 900 MW</option>
                              <option value="REP 1300 MW">REP 1300 MW</option>
                              <option value="REP 1450 MW">REP 1450 MW</option>
                              <option value="Toutes installations">Toutes installations</option>
                          </select>
            
                          <select class="filter-select" id="methodFilter">
                              <option value="">Toutes les m√©thodes</option>
                              <option value="Ultrasons (UT)">Ultrasons (UT)</option>
                              <option value="Radiographie (RT)">Radiographie (RT)</option>
                              <option value="Magn√©toscopie (MT)">Magn√©toscopie (MT)</option>
                              <option value="Ressuage (PT)">Ressuage (PT)</option>
                          </select>
            
                          <select class="filter-select" id="statusFilter">
                              <option value="">Tous les statuts</option>
                              <option value="current">Actuel</option>
                              <option value="available">Disponible</option>
                              <option value="update_available">MAJ disponible</option>
                              <option value="obsolete">Obsol√®te</option>
                          </select>
                      </div>
                  </div>
            
                  <div class="search-results-info">
                      <span id="searchResultsCount">Toutes les proc√©dures</span>
                      <button class="btn-small" id="clearSearchBtn" style="display: none;">‚úñ Effacer</button>
                  </div>
            
                  <div class="procedures-grid" id="proceduresGrid">
                      <!-- Les proc√©dures seront charg√©es dynamiquement -->
                  </div>
            
                  <!-- Statistiques Panel (masqu√© par d√©faut) -->
                  <div id="statsPanel" class="stats-panel" style="display: none;">
                      <div class="stats-header">
                          <h4>üìä Statistiques des Proc√©dures</h4>
                          <button class="btn-small" id="closeStatsBtn">‚úñ</button>
                      </div>
                      <div class="stats-content">
                          <div class="stats-grid">
                              <div class="stat-card">
                                  <span class="stat-number" id="totalProcedures">0</span>
                                  <span class="stat-label">Total Proc√©dures</span>
                              </div>
                              <div class="stat-card">
                                  <span class="stat-number" id="totalSize">0 MB</span>
                                  <span class="stat-label">Espace utilis√©</span>
                              </div>
                              <div class="stat-card">
                                  <span class="stat-number" id="currentProcedures">0</span>
                                  <span class="stat-label">Proc√©dures actuelles</span>
                              </div>
                              <div class="stat-card">
                                  <span class="stat-number" id="recentUpdates">0</span>
                                  <span class="stat-label">MAJ cette semaine</span>
                              </div>
                          </div>
            
                          <div class="charts-container">
                              <div class="chart-item">
                                  <h5>Par Installation</h5>
                                  <div id="installationChart" class="chart-bars"></div>
                              </div>
                              <div class="chart-item">
                                  <h5>Par M√©thode</h5>
                                  <div id="methodChart" class="chart-bars"></div>
                              </div>
                          </div>
                      </div>
                  </div>
              </section>
            
              <!-- Modal Upload Proc√©dure -->
              <div id="uploadModal" class="modal" style="display: none;">
                  <div class="modal-content">
                      <div class="modal-header">
                          <h4>‚ûï Upload Nouvelle Proc√©dure</h4>
                          <button class="btn-small" id="closeUploadBtn">‚úñ</button>
                      </div>
                      <form id="uploadForm" class="upload-form">
                          <div class="form-group">
                              <label>üìÅ Fichier PDF:</label>
                              <input type="file" id="procedureFile" accept=".pdf" required>
                          </div>
            
                          <div class="form-row">
                              <div class="form-group">
                                  <label>üî§ Code DT NUC:</label>
                                  <input type="text" id="procedureCode" placeholder="ex: DT NUC 150" required>
                              </div>
                              <div class="form-group">
                                  <label>üî¢ Version:</label>
                                  <input type="text" id="procedureVersion" placeholder="ex: 1.0" required>
                              </div>
                          </div>
            
                          <div class="form-group">
                              <label>üìù Titre:</label>
                              <input type="text" id="procedureTitle" placeholder="Titre de la proc√©dure" required>
                          </div>
            
                          <div class="form-group">
                              <label>üìÑ Description:</label>
                              <textarea id="procedureDescription" placeholder="Description d√©taill√©e..." rows="3"></textarea>
                          </div>
            
                          <div class="form-row">
                              <div class="form-group">
                                  <label>üè≠ Installation:</label>
                                  <select id="procedureInstallation" required>
                                      <option value="">S√©lectionner...</option>
                                      <option value="REP 900 MW">REP 900 MW</option>
                                      <option value="REP 1300 MW">REP 1300 MW</option>
                                      <option value="REP 1450 MW">REP 1450 MW</option>
                                      <option value="Toutes installations">Toutes installations</option>
                                  </select>
                              </div>
                              <div class="form-group">
                                  <label>üîß M√©thode:</label>
                                  <select id="procedureMethod" required>
                                      <option value="">S√©lectionner...</option>
                                      <option value="Ultrasons (UT)">Ultrasons (UT)</option>
                                      <option value="Radiographie (RT)">Radiographie (RT)</option>
                                      <option value="Magn√©toscopie (MT)">Magn√©toscopie (MT)</option>
                                      <option value="Ressuage (PT)">Ressuage (PT)</option>
                                  </select>
                              </div>
                          </div>
            
                          <div class="form-group">
                              <label>üîç Mots-cl√©s:</label>
                              <input type="text" id="procedureKeywords" placeholder="soudure, d√©faut, √©paisseur..." >
                          </div>
            
                          <div class="form-actions">
                              <button type="button" class="btn-secondary" id="cancelUploadBtn">Annuler</button>
                              <button type="submit" class="btn-primary">üì§ Upload Proc√©dure</button>
                          </div>
                      </form>
                  </div>
              </div>


            <!-- Section Check-list -->
            <section id="checklist" class="content-section">
                <div class="checklist-header">
                    <h3>‚úÖ Check-list DT NUC 001 - Contr√¥le UT</h3>
                    <div class="checklist-progress">
                        <span>5/12 √©tapes termin√©es</span>
                        <div class="mini-progress">
                            <div class="mini-progress-fill" style="width: 42%"></div>
                        </div>
                    </div>
                </div>

                <div class="checklist-items">
                    <div class="checklist-item completed">
                        <input type="checkbox" checked disabled>
                        <div class="item-content">
                            <h4>1. Pr√©paration mat√©riel</h4>
                            <p>V√©rification appareil UT, calibrage, √©talons</p>
                            <span class="timestamp">‚úÖ 14:23</span>
                        </div>
                    </div>

                    <div class="checklist-item completed">
                        <input type="checkbox" checked disabled>
                        <div class="item-content">
                            <h4>2. EPI et s√©curit√©</h4>
                            <p>Port des √©quipements de protection individuelle</p>
                            <span class="timestamp">‚úÖ 14:25</span>
                        </div>
                    </div>

                    <div class="checklist-item current">
                        <input type="checkbox">
                        <div class="item-content">
                            <h4>3. Contr√¥le zone A</h4>
                            <p>Soudures circulaires - √©paisseur nominale</p>
                            <div class="item-actions">
                                <button class="btn-small">üì∏ Photo</button>
                                <button class="btn-small">üìù Mesure</button>
                            </div>
                        </div>
                    </div>

                    <div class="checklist-item">
                        <input type="checkbox">
                        <div class="item-content">
                            <h4>4. Contr√¥le zone B</h4>
                            <p>Soudures longitudinales - d√©tection d√©fauts</p>
                        </div>
                    </div>

                    <div class="checklist-item">
                        <input type="checkbox">
                        <div class="item-content">
                            <h4>5. Mesures compl√©mentaires</h4>
                            <p>Relev√©s selon crit√®res d'acceptation</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section Photos & Mesures -->
            <section id="photos" class="content-section">
                <div class="media-header">
                    <h3>üì∏ Photos & Mesures - Mission actuelle</h3>
                    <button class="btn-primary">‚ûï Ajouter</button>
                </div>

                <div class="media-grid">
                    <div class="media-item">
                        <div class="media-thumbnail">
                            <div class="placeholder-image">üì∑</div>
                        </div>
                        <div class="media-info">
                            <h4>Soudure A-01</h4>
                            <p>UT - √âpaisseur: 12.3mm</p>
                            <span class="timestamp">14:45</span>
                        </div>
                    </div>

                    <div class="media-item">
                        <div class="media-thumbnail">
                            <div class="placeholder-image">üìä</div>
                        </div>
                        <div class="media-info">
                            <h4>Graphique UT</h4>
                            <p>Signal - Zone critique</p>
                            <span class="timestamp">14:42</span>
                        </div>
                    </div>

                    <div class="media-item">
                        <div class="media-thumbnail">
                            <div class="placeholder-image">üì∑</div>
                        </div>
                        <div class="media-info">
                            <h4>Vue g√©n√©rale</h4>
                            <p>Contexte intervention</p>
                            <span class="timestamp">14:20</span>
                        </div>
                    </div>
                </div>

                <div class="sync-info">
                    <div class="sync-status">
                        <span class="sync-icon">‚è∏Ô∏è</span>
                        <span>3 √©l√©ments en attente de synchronisation</span>
                    </div>
                    <button class="btn-secondary">Synchroniser maintenant</button>
                </div>
            </section>
        </main>

        <!-- Toast notifications -->
        <div id="toast-container"></div>
    </div>
    
    <script src="js/database.js"></script>
    <script src="js/procedure-manager.js"></script>

    <script src="app.js"></script>
</body>
</html>
